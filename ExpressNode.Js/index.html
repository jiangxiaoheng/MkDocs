<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>ExpressNode.Js - My Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "ExpressNode.Js";
        var mkdocs_page_input_path = "ExpressNode.Js.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> My Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Unity</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Unity%20%E9%80%8F%E8%A7%86%E9%95%9C%E5%A4%B4%20FOV%20%E8%A7%92%E5%BA%A6%E8%AE%A1%E7%AE%97/">Unity 透视镜头 FOV 角度计算</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Unity%20%E5%AD%A6%E4%B9%A0%E8%A1%A8/">Unity 学习表</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../UnityWebRequest%20%E4%B8%8E%20Web%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%AE%AF/">UnityWebRequest 与 Web 服务器通讯</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Unity%20%E9%A1%B9%E7%9B%AE%E7%BB%84%E7%BB%87%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/">Unity 项目组织目录结构</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Unity%20%E4%B8%AD%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%9A%84%E6%96%B9%E6%B3%95/">Unity 中数据存储的方法</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Unity%20%E9%85%8D%E7%BD%AE%E5%B7%A5%E5%85%B7%20Luban/">Unity 配置工具 Luban</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Unity%20Addressable%20%E4%BD%BF%E7%94%A8/">Unity Addressable 使用</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../C%23%20%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">C# 设计模式</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6/">游戏开发基础框架</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Nakama</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Nakama%20%E5%BF%85%E8%A6%81%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/">Nakama 必要功能实现</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Nakama%20%E9%83%A8%E7%BD%B2/">Nakama 部署</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Linux</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../Linux%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Linux 常用命令</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Linux%20%E8%AF%AD%E5%8F%A5%E5%91%BD%E4%BB%A4/">Linux 语句命令</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../VMware%20%E8%99%9A%E6%8B%9F%E6%9C%BA/">VMware 虚拟机</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SQL%20%E8%AF%AD%E5%8F%A5/">SQL 语句</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Nginx/">Nginx</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">ExpressNode.Js</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#express">安装 Express</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#express_1">执行 Express</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#express_2">第一个 Express 框架实例</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_1">静态文件</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cookie">Cookie 管理</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#_2">请求和响应</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../HTML%20CSS%20%E8%AF%AD%E5%8F%A5/">HTML CSS 语句</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../PHP%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%20Composer%20%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/">PHP 开发环境 Composer 安装与使用.md</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../%E7%BD%91%E7%AB%99%E9%83%A8%E7%BD%B2%E8%A7%84%E5%88%92/">网站部署规划</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Python</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Python%20%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/">Python 虚拟环境</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Docker</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Django%20Tornado%20Nginx/">Django Tornado Nginx</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Django%20%E8%AF%AD%E5%8F%A5/">Django 语句</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Docker/">Docker</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">My Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Linux &raquo;</li>
      <li>ExpressNode.Js</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="expressnodejs">ExpressNode.js</h1>
<h2 id="express">安装 Express</h2>
<pre><code>npm install express
</code></pre>
<h2 id="express_1">执行 Express</h2>
<pre><code>node main.js
</code></pre>
<h2 id="express_2">第一个 Express 框架实例</h2>
<pre><code class="language-js">// 通过 require() 导入 Express 模块
const express = require('express');

// 并创建了一个 Express 应用
const app = express();

// 路由定义。app.get() 方法指定了一个回调 (callback) 函数，该函数在每监听到一个关于站点根目录路径 ('/') 的 HTTP GET 请求时调用。此回调函数以一个请求和一个响应对象 (req, res) 作为参数。
// 并直接调用响应的 send() 来返回字符串“Hello World!”
app.get('/', function(req, res){
  res.send('Hello World!');
});

// 在“3000”端口上启动服务器，并在控制台打印日志。服务器运行时，可用浏览器访问 localhost:3000。
app.listen(3000, () =&gt; {
  console.log('示例应用正在监听 3000 端口 !');
});
</code></pre>
<h2 id="_1">静态文件</h2>
<p>Express提供了内置的中间件<strong>express.static</strong>来设置静态文件如：图片，CSS, JavaScript等。</p>
<p>你可以使用<strong>express.static</strong>中间件来设置静态文件路径。例如，如果你将图片， CSS, JavaScript文件放在public目录下。</p>
<pre><code class="language-js">app.use(express.static('public'));  // 可以不写，默认是 public
</code></pre>
<p>访问静态目录下文件</p>
<pre><code class="language-js">localhost:3000/test.txt // url 访问站点静态目录下 test.txt
</code></pre>
<p><strong>实例：</strong></p>
<pre><code class="language-js">const express = require('express');
const app = express();

// 静态目录，可以不写，默认是 public
app.use(express.static('public'));

// sendFile 是返回指定的文件, __dirname 是 node.js 帮助我们获取当前目录的绝对路径。
app.get('/index', function (req, res) {
  res.sendFile( __dirname + &quot;/&quot; + &quot;index.htm&quot; );
});

app.listen(3000);
</code></pre>
<h2 id="cookie">Cookie 管理</h2>
<p>我们可以使用中间件向Node.js服务器发送cookie信息，以下代码输出了客户端发送的cookie信息：</p>
<pre><code class="language-js">// express_cookie.js 文件
var express      = require('express')
var cookieParser = require('cookie-parser')

var app = express()
app.use(cookieParser())

app.get('/', function(req, res) {
  console.log(&quot;Cookies: &quot;, req.cookies)
})

app.listen(8081)
</code></pre>
<p>执行以上代码：</p>
<pre><code>$ node express_cookie.js 
</code></pre>
<h2 id="_2">请求和响应</h2>
<p>Express应用使用回调函数的参数： <strong>request</strong>和<strong>response</strong>对象来处理请求和响应的数据。</p>
<pre><code>app.get('/', function (req, res) {
   // --
})
</code></pre>
<p><strong>request</strong>和<strong>response</strong>对象的具体介绍：</p>
<p><strong>Request 对象</strong> - request对象表示HTTP请求，包含了请求查询字符串，参数，内容，HTTP头部等属性。常见属性有：</p>
<ol>
<li>req.app：当callback为外部文件时，用req.app访问express的实例</li>
<li>req.baseUrl：获取路由当前安装的URL路径</li>
<li>req.body / req.cookies：获得「请求主体」/ Cookies</li>
<li>req.fresh / req.stale：判断请求是否还「新鲜」</li>
<li>req.hostname / req.ip：获取主机名和IP地址</li>
<li>req.originalUrl：获取原始请求URL</li>
<li>req.params：获取路由的parameters</li>
<li>req.path：获取请求路径</li>
<li>req.protocol：获取协议类型</li>
<li>req.query：获取URL的查询参数串</li>
<li>req.route：获取当前匹配的路由</li>
<li>req.subdomains：获取子域名</li>
<li>req.accpets（）：检查请求的Accept头的请求类型</li>
<li>req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguages</li>
<li>req.get（）：获取指定的HTTP请求头</li>
<li>req.is（）：判断请求头Content-Type的MIME类型</li>
</ol>
<p><strong>Response 对象</strong> - response对象表示HTTP响应，即在接收到请求时向客户端发送的HTTP响应数据。常见属性有：</p>
<ol>
<li>res.app：同req.app一样</li>
<li>res.append（）：追加指定HTTP头</li>
<li>res.set（）在res.append（）后将重置之前设置的头</li>
<li>res.cookie（name，value [，option]）：设置Cookie</li>
<li>opition: domain / expires / httpOnly / maxAge / path / secure / signed</li>
<li>res.clearCookie（）：清除Cookie</li>
<li>res.download（）：传送指定路径的文件</li>
<li>res.get（）：返回指定的HTTP头</li>
<li>res.json（）：传送JSON响应</li>
<li>res.jsonp（）：传送JSONP响应</li>
<li>res.location（）：只设置响应的Location HTTP头，不设置状态码或者close response</li>
<li>res.redirect（）：设置响应的Location HTTP头，并且设置状态码302</li>
<li>res.send（）：传送HTTP响应</li>
<li>res.sendFile（path [，options] [，fn]）：传送指定路径的文件 -会自动根据文件extension设定Content-Type</li>
<li>res.set（）：设置HTTP头，传入object可以一次设置多个头</li>
<li>res.status（）：设置HTTP状态码</li>
<li>res.type（）：设置Content-Type的MIME类型</li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Nginx/" class="btn btn-neutral float-left" title="Nginx"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../HTML%20CSS%20%E8%AF%AD%E5%8F%A5/" class="btn btn-neutral float-right" title="HTML CSS 语句">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Nginx/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../HTML%20CSS%20%E8%AF%AD%E5%8F%A5/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
